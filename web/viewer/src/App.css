@import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

body {
	background-color: #282c34;
	color: #fff;
	font-family: 'VT323', monospace;

	--panel-size: 12vh;
	--map-size: calc(100vh - var(--panel-size) * 2);
	--map-X: 50;
	--map-Y: 50;
	--blue: #ff9100;
	--pixelated-small: polygon(
    0px 2px,
    2px 2px,
    2px 0px,
    calc(100% - 2px) 0px,
    calc(100% - 2px) 2px,
    100% 2px,
    100% calc(100% - 2px),
    calc(100% - 2px) calc(100% - 2px),
    calc(100% - 2px) 100%,
    2px 100%,
    2px calc(100% - 2px),
    0px calc(100% - 2px)
  );
	--pixelated: polygon(
    0px 8px,
    4px 8px,
    4px 4px,
    8px 4px,
    8px 0px,
    calc(100% - 8px) 0px,
    calc(100% - 8px) 4px,
    calc(100% - 4px) 4px,
    calc(100% - 4px) 8px,
    100% 8px,
    100% calc(100% - 8px),
    calc(100% - 4px) calc(100% - 8px),
    calc(100% - 4px) calc(100% - 4px),
    calc(100% - 8px) calc(100% - 4px),
    calc(100% - 8px) 100%,
    8px 100%,
    8px calc(100% - 4px),
    4px calc(100% - 4px),
    4px calc(100% - 8px),
    0px calc(100% - 8px)
  );
}

* {
	box-sizing: border-box;
}

.app-head,
.app-foot {
	height: var(--panel-size);
	display: flex;
	justify-content: space-between;
	padding: 10px 20px;
	align-items: center;
}

.map {
	height: var(--map-size);
	margin: 0 auto;
	width: var(--map-size);
	position: relative;
	display: flex;
}

.map::before {
	display: block;
	position: absolute;
	content: "";
	background: rgba(40, 44, 52, 0.8);
	width: 100%;
	height: 100%;
	top: 0;
	left: 0;
	z-index: 50;
	opacity: 0;
	transition: all 250ms;
}

.map.countdown::before {
	opacity: 1;
}

.map .countdown {
	display: block;
	position: absolute;
	width: 100%;
	height: 100%;
	top: 0;
	left: 0;
	z-index: 60;
	display: flex;
	align-items: center;
	justify-content: center;
	animation: colorIn 400ms;
	font-size: 50vh;
}

.row {
	display: flex;
	width: calc( var(--map-size) / var(--map-X) );
	flex-wrap: wrap;
	flex-direction: column-reverse;
}

.cell {
	align-items: center;
	border-bottom: 0;
	color: black;
	display: flex;
	height: calc( var(--map-size) / var(--map-Y) );
	justify-content: center;
	position: relative;
	width: calc( var(--map-size) / var(--map-X) );
}

.cell:first-child {
	border-left: 0;
}

.row:first-child .cell {
	border-top: 0;
}

.cell::before,
.color,
.obstacle {
	background: #3d434f;
	clip-path: var(--pixelated-small);
	content: "";
	height: 80%;
	left: 10%;
	position: absolute;
	top: 10%;
	width: 80%;
	z-index: -1;
}

.obstacle {
	background: url("https://s3.amazonaws.com/spoonflower/public/design_thumbnails/0396/3573/rbricks_large_shop_thumb.png");
	background-size: cover;
	border-radius: 0;
	height: 100%;
	left: 0;
	top: 0;
	width: 100%;
	z-index: 2;
	background: black;
}

.flicker {
	animation: flicker 1000ms;
	animation-timing-function: steps(2, jump-start);
	animation-iteration-count: infinite;
}

.color {
	animation: colorIn 300ms;
	z-index: 1;
}

.password {
	display: block;
	font-size: 24px;
}

.password span {
	color: orange;
}

.color-1 {
	background: red;
}

.color-2 {
	background: var(--blue);
}

.color-3 {
	background: green;
}

.color-4 {
	background: pink;
}

.text-red {
	color: red;
}

.text-blue {
	color: var(--blue);
}

.text-green {
	color: green;
}

.text-pink {
	color: pink;
}

.branding img {
	height: 8vh;
	width: auto;
}

.player-area {
	display: flex;
	flex-direction: column;
	background: #3d434f;
	padding: 1vh 2vh;
	clip-path: var(--pixelated);
	min-width: 300px;
}

.player-area .name {
	font-size: 5vh;
}

.player-area .score {
	font-size: 3vh;
}

.bullet {
	position: absolute;
	z-index: 40;
	width: 30%;
	height: 20%;
	background: gold;
	animation: colorIn 300ms;
}

.bullet::after {
	width: 40%;
	height: 100%;
	position: absolute;
	top: 0;
	right: -40%;
	background: orange;
	content: "";
	border-top-right-radius: 100%;
	border-bottom-right-radius: 100%;
}

.bomb {
	width: 45%;
  height: 45%;
  position: absolute;
  background: black;
  z-index: 2;
  border-radius: 100%;
	animation: pulse 400ms;
	animation-iteration-count: infinite;
}

.bomb::before {
	position: absolute;
	top: -10%;
	width: 12%;
	height: 10%;
	background: white;
	content: "";
	left: 44%;
}

.bomb::after {
	position: absolute;
	top: -20%;
	width: 20%;
	height: 10%;
	background: yellow;
	content: "";
	left: 40%;
}

.bomb-explode {
 --star-color:orange;
 margin:1em auto;
 font-size:calc( var(--map-size) / var(--map-X) * 2);
 position: relative;
 display: block;
 width: 0px;
 height: 0px;
 border-right: 1em solid transparent;
 border-bottom: 0.7em solid var(--star-color);
 border-left: 1em solid transparent;
 transform: rotate(35deg);
 z-index: 20;
 animation: explode 1000ms both;
}
.bomb-explode:before {
 border-bottom: 0.8em solid var(--star-color);
 border-left: 0.3em solid transparent;
 border-right: 0.3em solid transparent;
 position: absolute;
 height: 0;
 width: 0;
 top: -0.45em;
 left: -0.65em;
 display: block;
 content:"";
 transform: rotate(-35deg);
}
.bomb-explode:after {
 position: absolute;
 display: block;
 top: 0.03em;
 left: -1.05em;
 width: 0;
 height: 0;
 border-right: 1em solid transparent;
 border-bottom: 0.7em solid var(--star-color);
 border-left: 1em solid transparent;
 transform: rotate(-70deg);
 content:"";
}

.player {
	align-items: center;
	display: flex;
	flex-direction: column;
	justify-content: center;
	z-index: 3;
	width: 100%;
	height: 100%;
	overflow: hidden;
	/* animation: dance 400ms; */
	animation-iteration-count: infinite;
}

.player-head {
	background: #d8d3c3;
	width: 20%;
	height: 20%;
}

.player-body {
	background: teal;
	max-height: 30px;
	max-width: 40px;
	width: 50%;
	height: 30%;
	position: relative;
}

.player-1 .player-body {
	background: red;
}

.player-2 .player-body {
	background: orange;
}

.player-3 .player-body {
	background: blue;
}

.player-feet {
	width: 42%;
	height: 8%;
	position: relative;
}

.player-feet::before,
.player-feet::after,
.player-body::before,
.player-body::after {
	position: absolute;
	content: "";
	display: block;
	background: #d8d3c3;
	left: 0;
	top: 0;
}

.player-feet::before,
.player-feet::after {
	height: 100%;
	width: 20%;
}

.player-body::before,
.player-body::after {
	height: 35%;
	width: 20%;
	left: -20%;
}

.player-feet::after {
	left: auto;
	right: 0;
}

.player-body::after {
	left: auto;
	right: -20%;
}

button {
	background: transparent;
	color: #fff;
	font-family: 'VT323', monospace;
	font-size: 3vh;
	padding: 1vh 2vh;
	cursor: pointer;
	position: relative;
	border: 0;
}

button:hover {
	background: rgba(255,255,255,0.2)
}

.select-screen {
	display: flex;
	align-items: center;
	flex-direction: column;
	height: 100vh;
	justify-content: center;
}

.intro-players {
	display: flex;
	gap: 1vh;
	margin: 20px 0 30px;
}

.intro-players .player {
	width: 9vh;
	height: 9vh;
	animation: dance 400ms;
	animation-iteration-count: infinite;
}

.intro-players .player:nth-child(1) .player-body {
	background: red;
}

.intro-players .player:nth-child(2) {
	animation-delay: 100ms;
}
.intro-players .player:nth-child(2) .player-body {
	background: var(--blue);
}

.intro-players .player:nth-child(3) {
	animation-delay: 200ms;
}
.intro-players .player:nth-child(3) .player-body {
	background: green;
}

.intro-players .player:nth-child(4) {
	animation-delay: 300ms;
}
.intro-players .player:nth-child(4) .player-body {
	background: pink;
}

.select-screen .app-head,
.select-screen .app-foot {
	justify-content: center;
	height: auto;
}

.select-screen .branding img {
	height: 20vh;
}

.select-screen .controls {
	text-align: center;
}

.timer {
	font-size: 60px;
	text-align: center;
}

.select-screen .controls button:first-child::before {
	content: "> ";
	animation: flicker 800ms;
	animation-timing-function: steps(2, jump-start);
	animation-iteration-count: infinite;
}

@keyframes colorIn {
	from {
		transform: scale(0.1);
	}

	to {
		transform: scale(1);
	}
}

@keyframes explode {
	from {
		transform: scale(0.01) rotate(35deg);
		opacity: 1;
	}

	to {
		transform: scale(1) rotate(35deg);
		opacity: 0;
	}
}

@keyframes flicker {
	from {
		opacity: 0;
	}

	to {
		opacity: 1;
	}
}

@keyframes dance {
	0%, 100% {
		transform: rotate(-10deg);
	}

	50% {
		transform: rotate(10deg);
	}
}

@keyframes pulse {
	0%, 100% {
		transform: scale(1);
	}

	50% {
		transform: scale(1.2);
	}
}
